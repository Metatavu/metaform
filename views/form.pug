extends layout/layout
include mixins/fields

block custom-head
  title #{viewModel.title}
  link(rel='stylesheet', href='/css/form.min.css')
  link(rel='stylesheet', href='/css/themes/' + viewModel.theme  + '/form.min.css')
  link(rel='stylesheet', href='//cdn.metatavu.io/libs/hyperform/0.8.15/hyperform.min.css')
  link(rel='stylesheet', href='//cdnjs.cloudflare.com/ajax/libs/flatpickr/2.3.4/flatpickr.min.css')
  script(defer='defer',src='//cdn.metatavu.io/libs/jquery-ui/1.12.1/jquery-ui.min.js',type='text/javascript')
  script(defer='defer',src='//cdn.metatavu.io/libs/jquery.fileupload/9.14.2/js/jquery.iframe-transport.js',type='text/javascript')
  script(defer='defer',src='//cdn.metatavu.io/libs/jquery.fileupload/9.14.2/js/jquery.fileupload.js',type='text/javascript')
  script(defer='defer',src='//cdn.metatavu.io/libs/pdfmake/0.1.24/pdfmake.min.js')
  script(defer='defer',src='//cdn.metatavu.io/libs/pdfmake/0.1.24/vfs_fonts.js')
  script(defer='defer',src='//cdn.metatavu.io/libs/hyperform/0.8.15/hyperform.min.js',type='text/javascript')
  script(defer='defer',src='//cdnjs.cloudflare.com/ajax/libs/flatpickr/2.3.4/flatpickr.min.js',type='text/javascript')
  script(defer='defer',src='//cdnjs.cloudflare.com/ajax/libs/flatpickr/2.3.4/l10n/fi.js',type='text/javascript')
  script(defer='defer',src='/js/modernizr.js')
  script(defer='defer',src='/js/form.js')
block body
  .container
    .row
      .col-12
        h1
          =viewModel.title
    .row
      .col-12
        form
          each section, index in viewModel.sections 
            .row
              section.col-12(data-visible-if=section['visible-if'], id="section-" + index)
                .row
                  .col-12
                    h2
                      =section.title
                .row
                  .col-12
                    small
                      =section.description
                .row
                  fieldset.col-12
                    each field in section.fields
                      if field.contexts.indexOf('FORM') > -1
                        +field(field)